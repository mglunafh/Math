\subsection{Дробно-рациональные функции}
При рассмотрении дробно-рациональных функций над кольцами мы ограничимся случаем области целостности. Для начала определим понятие поля частных над некоторой областью целостности $A$.

Расcмотрим множество $M = A \times A\backslash \{0\}.$ На этом множестве заведем отношение эквивалентности: пары $(a,b)$ и $(c,d)$ эквивалентны, если $ad = bc.$ Факт эквивалентности будем отмечать как $(a,b)~ \sim ~(c,d)$.

Проверим, что это отношение действительно рефлексивно, симметрично, транзитивно.
\begin{enumerate}
	\item Пара $(a,b)$, конечно же, эквивалентна самой себе: $ab = ba.$
	\item Если $(a,b) \sim (c,d),$ то $ad = bc.$ Воспользовавшись коммутативностью умножения, получим: $cb = da$, $(c,d) \sim (a,b).$
	\item Если $(a,b) \sim (a_1,b_1),$ а $(a_1,b_1) \sim (a_2, b_2),$ то получаем: 
	
	$$ \left\{ \begin{matrix} ab_1 = a_1 b \\ a_1b_2 = b_1a_2 \end{matrix} \right. \; \Leftrightarrow \;
	   \left\{ \begin{matrix} ab_1b_2 = a_1bb_2 \\ a_1b_2b = a_2b_1b \end{matrix} \right.
	$$ 
	Из последней системы получаем, что $ab_1b_2 = a_2b_1b;$ далее, в силу того, что $b_1 \neq 0,$ на него можно сократить и получить $ab_2 = a_2b,$ $(a,b) \sim (a_2,b_2),$ что, собственно, и требовалось.  
\end{enumerate}

Итак, на множестве $M$ задано отношение эквивалентности. Фактор-множество $M|_\sim$ по данному отношению эквивалентностью обозначим через $Q(A).$ Класс элемента $[(a,b)]$ будем обозначать через $\frac{a}{b}.$

Введем на $Q(A)$ какие-нибудь операции.

"`Сложение"': $\frac{a}{b} + \frac{a_1}{b_1} = \frac{ab_1 + a_1 b}{bb_1}.$ Заметим, что элемент $bb_1$ не обращается в нуль в области целостности.

"`Умножение"': $\frac{a}{b} \cdot \frac{a_1}{b_1} = \frac{aa_1}{bb_1}.$

\setcounter{rem}{0}
\begin{rem} Простейшие свойства:
\begin{enumerate}
	\item $\frac{a}{b} + \frac{c}{b} = \frac{a+c}{b};$
	\item $\frac{ac}{bc} = \frac{a}{b}$ при $c\neq 0.$
\end{enumerate}
\end{rem}
\begin{proof} 
\begin{enumerate}
	\item  Равенство $\frac{a}{b} + \frac{c}{b} = \frac{ab+cb}{b^2} = \frac{a+c}{b}$ напрямую следует из равенства 
	$(ab+cb)\cdot b = (a+c) \cdot b^2.$
	\item Точно также $ac\cdot b = bc \cdot a,$ и поэтому $\frac{ac} {bc} = \frac{a}{b}.$
\end{enumerate}
\end{proof}

\begin{prop} Множество $Q(A)$ со "`сложением"' и "`умножением"' образует поле.
\end{prop}
\begin{proof} Докажем, что действия действительно удовлетворяют аксиомам поля. Для начала разберемся со сложением.
\begin{itemize}
	\item Коммутативность сложения вытекает из свойств коммутативности уже в исходной области целостности $A.$
	\item Ассоциативность.
	\hspace{-1cm}$$ \left(\frac{a}{b} + \frac{a_1}{b_1} \right) + \frac{a_2}{b_2} = \frac{ab_1 + a_1b}{bb_1} + \frac{a_2}{b_2} = 
	\frac {ab_1b_2 + a_1bb_2 + a_2bb_1} {bb_1b_2} = \frac{ab_1b_2 + b(a_1b_2+a_2b_1)}{b(b_1b_2)} = \frac{a}{b} + \frac{a_1b_2 + a_2b_1}{b_1b_2} = $$ 
	$$ =\frac{a}{b} + \left(\frac{a_1}{b_1} + \frac{a_2}{b_2}\right).	$$
	\item Нейтральный элемент, как нетрудно видеть, --- это $\frac{0}{1}:$
	$$ \frac{a}{b} + \frac{0}{1} = \frac{a\cdot1+0\cdot b}{b\cdot 1} = \frac{a}{b}.$$
	\item Противоположный к элементу $\frac{a}{b}$ --- это $\frac{-a}{b}:$
	$$ \frac{a}{b} + \frac{-a}{b} = \frac{a - a}{b} = \frac{0}{b} = \frac{0\cdot b}{b} = \frac{0}{1}.$$
\end{itemize}

Теперь свойства умножения. Коммутативность, ассоциативность, доказательство того, что элемент $\frac{1}{1}$ нейтральный по умножению, совершенно очевидным образом вытекают из аналогичных свойств умножения в области целостности $A.$
\begin{itemize}
	\item Если $\frac{a}{b} \neq \frac{0}{1},$ то, как нетрудно заметить, $ a \neq 0\cdot b = 0,$ и поэтому $\frac{a}{b}$ обладает обратным по умножению, и обратный этот $\frac{b}{a}.$
\end{itemize}

Дистрибутивность.
$$ \frac{a}{b} \left(\frac{a_1}{b_1} + \frac{a_2}{b_2}\right) = \frac{a(a_1b_2 + a_2b_1)}{bb_1b_2} = 
	\frac{aa_1b_2+aa_2b_1}{bb_1b_2} = \frac{aa_1b_2}{bb_1b_2} + \frac{aa_2b_1}{bb_1b_2} = \frac{aa_1}{bb_1} + \frac{aa_2}{bb_2} =\frac{a}{b} \cdot \frac{a_1}{b_1} + \frac{a}{b}\cdot \frac{a_2}{b_2} . $$
\end{proof}

\begin{defn} Поле $Q(A)$ называется полем отношений или полем частных области целостности $A.$ Иногда также обозначается через ${\rm Quot}(A)$ или ${\rm Fr}(A).$ 
\end{defn}

Аналогичную конструкцию можно провести и для произвольного коммутативного кольца, если запретить в знаменателе делители нули. 

\begin{defn} Если в качестве области целостности выступает кольцо многочленов $\k[X]$, где $\k$ --- некоторое поле, то поле $Q(\k[X])$ называется полем дробно-рациональных функций от одной переменной над полем $\k$ и обозначается через $\k(X).$
\end{defn}

Пусть $A$ --- факториальное кольцо. Дробь (точнее, запись) $\frac{a}{b}$ называется несократимой, если $\gcd (a,b) = 1.$
\begin{prop} Пусть $A$ --- факториальное кольцо, $x\in Q(A).$
\begin{enumerate}
	\item Найдутся такие $a,b \in A,$ что $\gcd(a,b) = 1$ и $x = \frac{a}{b};$
	\item для любых других таких $a_1,b_1\in A$,что выполнены свойства из пункта 1, то найдется $\varepsilon\in A^*:$ $a_1=a \varepsilon,$ $b_1 = b\varepsilon.$
\end{enumerate}
\end{prop}
\begin{proof} Пусть элемент $x$ представляется в виде $x = \frac{a_1}{b_1}$ для некоторых $a_1,b_1\in A,$ $b_1 \neq 0.$
Обозначим через $c = \gcd(a,b),$ тогда $a_1=ca,$ $b_1 = cb$ и $x = \frac{a}{b}.$ Докажем, что $a$ и $b$ взаимно просты. Пусть  $d = \gcd(a,b).$ Соотношение $d | a$ влечет, что $cd | ca,$ а из факта, что $d | b$, вытекает, что $cd | cb$, в таком случае, $cd | c$, поскольку $c$ --- наибольший общий делитель чисел $ac$ и $bc$. Поэтому $d\in A^*$, а значит, $1$ тоже является наибольшим общим делителем $a$ и $b$.

Пусть $\frac{a}{b} = \frac{a_1}{b_1},$ $ab_1 = a_1b.$ Элемент $b$ взаимно прост с $a$ и делит произведение $ab_1$, поэтому $b | b_1,$ аналогично $b_1 | b.$ Элементы $b$ и $b_1$ оказались ассоциированы, поэтому $b_1=b\varepsilon.$

$$ ab_1 = a_1b$$
$$ ab \varepsilon = a_1 b$$
$$ a\varepsilon = a_1.$$
\end{proof}

На этом моменте мы заканчиваем разговор о произвольных полях частных и сосредотачиваемся на полях дробно-рациональных функций.

\subsection{Правильные дроби}
Целью этого и следующего параграфов будет доказательство факта разложимости произвольной рациональной дроби в сумму  дробей специального вида, а именно простейших дробей. 

В силу последнего доказанного в предыдущем параграфе утверждения возникает определение. Cтандартная запись рациональной дроби $x\in \k(X)$ --- это дробь $\frac{f}{g},$ где $\gcd(f,g) = 1,$ а старший коэффициент $g$ равен $1$.

\setcounter{rem}{0}
\begin{rem} Если $\frac{f}{g} = \frac{f_1}{g_1} \neq 0$ для некоторых элементов поля $\k(X),$ то $\deg f_1 - \deg g_1 = \deg f - \deg g,$ то есть разность степеней числителя и знаменателя постоянна для произвольных записей элемента $\k(X)$, и поэтому такая разность является уже свойством элемента, а не его записи. 
\end{rem}

\begin{defn} Правильная дробь - это дробь $\frac{f}{g},$ где $\deg f < deg g.$
\end{defn}

\begin{prop} Сумма, разность и произведение правильных дробей --- правильная дробь.
\end{prop}
\begin{proof} Пусть $\frac{f_1}{g_1},$ $\frac{f_2}{g_2}$ --- правильные дроби, $\frac{f_1}{g_1}+ \frac{f_2}{g_2} = \frac{f_1g_2 + f_2g_1}{g_1g_2}.$

$\deg (f_1g_2 \pm f_2g_1) = \max (\deg f_1 + \deg g_2, \deg f_2 + \deg g_1).$  При этом оба числа, что стоят под операцией максимума, меньше суммы $\deg g_1 + \deg g_2,$ ну а тогда и сам максимум, то есть степень числителя, меньше степени.

Если рассмотреть произведение правильных дробей, то $\deg f_1 + \deg f_2 < \deg g_1 + \deg g_2.$
\end{proof}

\begin{prop}\label{WholePart} Любой элемент $f\in \k(X)$ представим однозначно в виде $f = g + \frac{a}{b},$ где $\frac{a}{b}$ --- правильная дробь.
\end{prop}
\begin{proof} Существование представления немедленно вытекает из теоремы о делении с остатком: $f = \frac{a_1}{b} = \frac{gb + a}{b} = \frac{gb}{b} + \frac{a}{b} = g + \frac{a}{b},$ причем $\deg a < \deg b.$
 
Единственность. Пусть подобное представлеение не единственно. 
$$g + \frac{a}{b} = g_1 + \frac{a_1}{b_1}$$ 
$$ g - g_1 = \frac{a_1}{b_1} - \frac{a}{b}.$$
Так как разность дробей --- правильная дробь, то и $g - g_1 = \frac{g - g_1}{1}$ тоже правильная дробь, отсюда $\deg(g-g_1) < \deg 1  = 0.$ Поэтому $g - g_1 = 0,$ $g =  g_1$ и $\frac{a}{b} = \frac{a_1}{b_1}.$
\end{proof}

\begin{defn} Дробь $f \in \k(X)$ называется примарной, если $f = \frac{a}{p^n}$ --- правильная, $p$ --- неприводимый многочлен, $n\in \mathbb{N}.$
\end{defn}

\begin{lem} Пусть $\frac{f}{g}$ --- правильная дробь, $g = g_1\cdot g_2,$ $\gcd(g_1,g_2) = 1.$ Тогда $\frac{f}{g}$ можно записать в виде $\frac{f}{g} = \frac{f_1}{g_1} + \frac{f_2}{g_2},$ где обе дроби $\frac{f_1}{g_1}, \frac{f_2}{g_2}$ правильные, причем такое представление единственно. 
\end{lem}
\begin{proof} Воспользуемся свойством взаимной простоты $g_1,g_2:$ $\exists h_1,h_2:$ $h_1g_1 +h_2g_2 = 1,$ тогда $fh_1g_1 + fh_2g_2 = f.$

$$ \frac{f}{g} = \frac{fh_1g_1+fh_2g_2}{g_1g_2} = \frac{fh_2}{g_1} + \frac{fh_1}{g_2} = F_1 + \frac{f_1}{g_1} + F_2 + \frac{f_2}{g_2},$$
где последнее равенство получается применением предложения \ref{WholePart}. Докажем, что $F_1 + F_2 = 0.$ Действительно, 
$$F_1 +F_2 = \frac{f}{g} - \frac{f_1}{g_1} - \frac{f_2}{g_2},$$
а правая часть равенства является правильной дробью, отсюда $\deg(F_1 +F_2) < 0$ и $F_1 + F_2 = 0.$ Итого, получаем требуемое разложение
$$ \frac{f}{g} = \frac{f_1}{g_1}+\frac{f_2}{g_2}.$$
Теперь докажем его единственность. Пусть нашлись два других числителя, что 
$$ \frac{f_1}{g_1} + \frac{f_2}{g_2} = \frac{\widetilde{f_1}}{g_1} + \frac{\widetilde{f_2}}{g_2} $$
$$ \frac{f_1 - \widetilde{f_1}}{g_1} =  \frac{f_2-\widetilde{f_2}}{g_2}$$

Так как $g_1 | (f_1-\widetilde{f_1})g_2$ и $\gcd(g_1,g_2) = 1$, то $g_1 | (f_1 - \widetilde{f_1})$. Но $\deg g_1 > \deg(f_1 - \widetilde{f_1})$, и поэтому разность $f_1 - \widetilde{f_1}$ просто обязана равняться нулю: $f_1 - \widetilde{f_1} = 0.$ Тогда и $f_2 = \widetilde{f_2},$ и, таким образом, единственность доказана. 
\end{proof}

Отсюда вытекает важный промежуточный факт.
\begin{thm}\label{DecompToFracofPrim} Любая правильная дробь единственным образом раскладывается в сумму примарных дробей.
\end{thm}
\begin{proof}
Существование. Докажем индукцией по числу $k$ неприводимых  попарно не ассоциированных сомножителей знаменателя $p_1, \ldots, p_k$,  что 
$$ \frac{f}{g} = \frac{f_1}{p_1^{n_1}} + \ldots + \frac{f_k}{p_k^{n_k}}.$$
При $k=1$ понятия правильной и примарной дроби совпадают, поэтому все доказано.

Пусть $k>1.$ Знаменатель $$g = \prod\limits_{i=1}^kp_i^{n_i} = \underbrace{p_1^{n_1}\cdot\ldots\cdot p_{k-1}^{n_{k-1}}}_{g_1} \cdot \underbrace{p_k^{n_k}}_{g_2}. $$
Применив предыдущую лемму к взаимно простым многочленам $g_1,g_2$ и индукционное предположение к дроби $\frac{h_1}{g_1}$, получим, что 
$$ \frac{f}{g} = \frac{h_1}{g_1} + \frac{h_2}{g_2} = \frac{f_1}{p_1^{n_1}} + \ldots + \frac{f_{k-1}}{p_{k-1}^{n_{k-1}}} + \frac{f_k}{p_k^{n_k}}.$$ 

Докажем единственность такого представления.
$$  \frac{f_1}{p_1^{n_1}} + \ldots + \frac{f_r}{p_r^{n_r}} = \frac{g_1}{q_1^{m_1}} + \ldots + \frac{g_s}{p_s^{m_s}}.$$
Если в одной части равенства не хватает какой-то дроби (имеется в виду, что, скажем, справа дробь со знаменателем $q_i^{m_i}$ присутствует, а слева дроби с таким знаменателем не случилось), то всегда можно пририсовать дробь, знаменатель которой --- тот самый, которого недоставало, а числитель равен нулю, при этом равенство сохранится. Поэтому из соображений удобства можно принять соглашение, что, на самом деле, $r=s$ и $p_1 = q_1,$ $p_2 = q_2,$ \ldots, $p_r = q_r,$ и тогда остается доказать, что просто числители при одинаковых неприводимых многочленах равны, то есть $f_i = g_i.$

Разберемся для примера с последней парой дробей, а остальные разберутся аналогично.

$$ \frac{f_r}{p_r^{n_r}} - \frac{g_r}{p_r^{m_r}} = \sum\limits_{i=1}^{r-1}\left( \frac{p_i}{q_i^{m_i}} - \frac{f_i}{p_i^{n_i}}\right).$$
Приведем обе части равенства к одному знаменателю и запишем в несократимом виде:
$$ \frac{a}{b} = \frac{\overline{a}}{\overline{b}},$$
Элемент $b$ делит $ p_r^{\max(m_r,n_r)}$, а $\overline{b}$ делит $\prod\limits_{i=1}^{r-1}{p_i}^{\max(m_i,n_i)}$ из соображений, по которым предъявлялась несократимая запись. Далее, поскольку обе дроби $\frac{a}{b}$ и $\frac{\overline{a}}{\overline{b}}$ несократимы, по замечанию насчет несократимых дробей знаменатели оказываются ассоциированны. Это, в свою очередь, влечет, что $b | \prod\limits_{i=1}^{r-1}{p_i}^{\max(m_i,n_i)}$, хотя нaибольший общий делитель $\prod\limits_{i=1}^{r-1}{p_i}^{\max(m_i,n_i)}$ и $p_r^{\max(m_r,n_r)}$ равен единице. Отсюда делаем вывод, что $b \in \k$, а в таком случае $a=0$, так как дробь $\frac{a}{b}$ --- правильная. Таким образом, доказано, что $\frac{f_r}{p_r^{n_r}} = \frac{g_r}{p_r^{m_r}}.$ Аналогично с остальными дробями.
\end{proof}
